# 1.4 协程原理
&emsp;&emsp;肯定有一类人不愿意停留在类似“车子是可以用来开的”这种基础的概念上，他们想翻开车盖去看看车子到底是如何工作的。我就是这类人的其中之一，所以我想挖掘清楚协程是如何工作的。如果你也属于这类人，那么你将会享受本章，如果你不是，那么你可跳过这本章。

&emsp;&emsp;本章不会介绍任何你可能会使用的新工具，并且是纯原理解释性的，本章尝试着向你阐述协程是如何工作的，尽量使你达到满意的程度。主要章节分为：
 - 挂起函数类似于状态机，在函数开始处和挂起函数调用之后都会有一个可能的状态。
 - 标识状态的编号和本地数据都保存在continuation对象中。
 - 一个函数的continuation包装了另一个函数的continuation，总之，所有这些continuation都代表了我们恢复时使用的调用栈。

&emsp;&emsp;如果你对学习一些内在东西（当然了，会有一些简化）非常感兴趣，那么跟着我开始把。

## Continuation-passing风格 ([参考文章](https://zhuanlan.zhihu.com/p/387239708))
&emsp;&emsp;有很多方法可以实现挂起函数，但kotlin选择了Continuation-passing这种方式来实现，这意味着Continuations(我们在前一章解释过)是被作为一个参数在函数间传递。
